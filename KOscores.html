<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="./logos/favicon.png">
    <title>Knockout Stages Results</title>
    <style>
        body {
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            margin: 10px;
            background-color: #1e1e1e;
            color: #7c7a7a;
        }

        .menu-container {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .menu {
            list-style-type: none;
            padding: 0;
        }

        .menu li {
            display: inline;
            margin-left: 20px;
        }

        .menu li a {
            color: #7c7a7a;
            text-decoration: none;
            font-weight: bold;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            table-layout: fixed;
        }

        th,
        td {
            border: none;
            padding: 5px;
            text-align: center;
        }

        th {
            background-color: #333333;
        }

        td.stage-cell {
            border-bottom: 2px solid #444444;
            width: 100%;
            align-content: top;
        }

        select {
            width: 200px;
            background-color: #6b6a6a;
            color: #fff;
            border: 1px solid #444444;
        }

        .logo-container {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .bold-text {
            font-weight: bold;
        }

        .footnote {
            position: fixed;
            bottom: 10px;
            right: 10px;
            font-size: 0.8em;
            color: #484747;
            background-color: 1e1e1e;
            padding: 5px;
            border-radius: 3px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>

<body>
    <div class="menu-container">
        <ul class="menu">
            <li><a href="./ranks.html">Rankings</a></li>
            <li><a href="./comp2euros.html">Euro2024 Results</a></li>
            <li><a href="./group_gbyg.html">Group Stages Results</a></li>
            <li><a href="./KOscores.html">KO Stages Results</a></li>
            <li><a href="./pvsp.html">Player vs Player</a></li>
            <li><a href="./all_predictions.html">Download All Predictions</a></li>
            <li><a href="./predictform.html">Prediction Form</a></li>
            <li><a href="./rules.html">Points System</a></li>
            <li><a href="./widget.html">Widget</a></li>
        </ul>
    </div>
    <div class="logo-container">
        <img src="./logos/logo.png" alt="Euro 2024 Logo" style="width:300px;">
    </div>
    <h1>Knockout Stages Results</h1>

    <!-- QF Table -->
    <table id="qfTable">
        <thead>
            <tr>
                <th>QF</th>
                <th>Match</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>QT 1</td>
            </tr>
            <tr>
                <td>QT 2</td>
            </tr>
            <tr>
                <td>QT 3</td>
            </tr>
            <tr>
                <td>QT 4</td>
            </tr>
            <tr>
                <td>QT 5</td>
            </tr>
            <tr>
                <td>QT 6</td>
            </tr>
            <tr>
                <td>QT 7</td>
            </tr>
            <tr>
                <td>QT 8</td>
            </tr>
        </tbody>
    </table>

    <!-- SF Table -->
    <table id="sfTable">
        <thead>
            <tr>
                <th>SF</th>
                <th>Match</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>QT 1</td>
            </tr>
            <tr>
                <td>QT 2</td>
            </tr>
            <tr>
                <td>QT 3</td>
            </tr>
            <tr>
                <td>QT 4</td>
            </tr>
        </tbody>
    </table>

    <!-- F Table -->
    <table id="fTable">
        <thead>
            <tr>
                <th>F</th>
                <th>Match</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>QT 1</td>
            </tr>
            <tr>
                <td>QT 2</td>
            </tr>
        </tbody>
    </table>

    <!-- Champion Table -->
    <table id="championTable">
        <thead>
            <tr>
                <th colspan="2">Champion</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td colspan="2"></td>
            </tr>
        </tbody>
    </table>

    <!-- Golden Boot Table -->
    <table id="goldenBootTable">
        <thead>
            <tr>
                <th colspan="2">Golden Boot</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td colspan="2"></td>
            </tr>
        </tbody>
    </table>

    <!-- Top Player Table -->
    <table id="topPlayerTable">
        <thead>
            <tr>
                <th colspan="2">Top Player</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td colspan="2"></td>
            </tr>
        </tbody>
    </table>

    <script>
        const countries = {
            'Germany': 'https://flagcdn.com/w20/de.png',
            'Scotland': 'https://flagcdn.com/w20/gb-sct.png',
            'Hungary': 'https://flagcdn.com/w20/hu.png',
            'Switzerland': 'https://flagcdn.com/w20/ch.png',
            'Spain': 'https://flagcdn.com/w20/es.png',
            'Croatia': 'https://flagcdn.com/w20/hr.png',
            'Italy': 'https://flagcdn.com/w20/it.png',
            'Albania': 'https://flagcdn.com/w20/al.png',
            'Serbia': 'https://flagcdn.com/w20/rs.png',
            'England': 'https://flagcdn.com/w20/gb-eng.png',
            'Slovenia': 'https://flagcdn.com/w20/si.png',
            'Denmark': 'https://flagcdn.com/w20/dk.png',
            'Poland': 'https://flagcdn.com/w20/pl.png',
            'Netherlands': 'https://flagcdn.com/w20/nl.png',
            'Austria': 'https://flagcdn.com/w20/at.png',
            'France': 'https://flagcdn.com/w20/fr.png',
            'Romania': 'https://flagcdn.com/w20/ro.png',
            'Ukraine': 'https://flagcdn.com/w20/ua.png',
            'Belgium': 'https://flagcdn.com/w20/be.png',
            'Slovakia': 'https://flagcdn.com/w20/sk.png',
            'Turkey': 'https://flagcdn.com/w20/tr.png',
            'Georgia': 'https://flagcdn.com/w20/ge.png',
            'Portugal': 'https://flagcdn.com/w20/pt.png',
            'Czechia': 'https://flagcdn.com/w20/cz.png'
        };

        const abbreviations = {
            'Germany': 'GER',
            'Scotland': 'SCO',
            'Hungary': 'HUN',
            'Switzerland': 'SUI',
            'Spain': 'ESP',
            'Croatia': 'CRO',
            'Italy': 'ITA',
            'Albania': 'ALB',
            'Serbia': 'SRB',
            'England': 'ENG',
            'Slovenia': 'SVN',
            'Denmark': 'DEN',
            'Poland': 'POL',
            'Netherlands': 'NED',
            'Austria': 'AUT',
            'France': 'FRA',
            'Romania': 'ROU',
            'Ukraine': 'UKR',
            'Belgium': 'BEL',
            'Slovakia': 'SVK',
            'Turkey': 'TUR',
            'Georgia': 'GEO',
            'Portugal': 'POR',
            'Czechia': 'CZE'
        };

        document.addEventListener('DOMContentLoaded', async function () {
            const response = await fetch('./jsons/participants.json');
            const data = await response.json();
            const participants = data.participants;
            const tables = {
                qfTable: document.querySelector('#qfTable tbody'),
                sfTable: document.querySelector('#sfTable tbody'),
                fTable: document.querySelector('#fTable tbody'),
                championTable: document.querySelector('#championTable tbody'),
                goldenBootTable: document.querySelector('#goldenBootTable tbody'),
                topPlayerTable: document.querySelector('#topPlayerTable tbody')
            };

            for (let i = 0; i < participants.length; i++) {
                const participant = participants[i];
                const th = document.createElement('th');
                th.colSpan = 2;
                th.textContent = participant.name;

                for (const table of Object.values(tables)) {
                    const thead = table.closest('table').querySelector('thead tr:first-child');
                    const subThead = table.closest('table').querySelector('thead tr:last-child');
                    thead.appendChild(th.cloneNode(true));

                    const subThTeam = document.createElement('th');
                    subThTeam.className = 'sub-column';
                    subThTeam.textContent = 'Team';
                    subThead.appendChild(subThTeam);

                    const subThScore = document.createElement('th');
                    subThScore.className = 'sub-column';
                    subThScore.textContent = 'Score';
                    subThead.appendChild(subThScore);
                }

                const csvResponse = await fetch(participant.scores);
                const csvData = await csvResponse.text();

                const rows = csvData.split('\n').map(row => row.split(','));

                populateRows(rows, i, tables);
            }

            function populateRows(rows, index, tables) {
                const getCellData = (row, teamCol, scoreCol) => {
                    return { team: rows[row][teamCol], score: rows[row][scoreCol] };
                };

                const qfStartRow = 51;
                const sfStartRow = 61;
                const fStartRow = 67;
                const championRow = 71;
                const goldenBootRow = 74;
                const topPlayerRow = 75;

                // Populate QF
                for (let i = 0; i < 8; i++) {
                    const data = getCellData(qfStartRow + i, 3, 5);
                    const row = tables.qfTable.querySelectorAll('tr')[i];
                    appendCells(row, data, index);
                }

                // Populate SF
                for (let i = 0; i < 4; i++) {
                    const data = getCellData(sfStartRow + i, 3, 5);
                    const row = tables.sfTable.querySelectorAll('tr')[i];
                    appendCells(row, data, index);
                }

                // Populate F
                for (let i = 0; i < 2; i++) {
                    const data = getCellData(fStartRow + i, 3, 5);
                    const row = tables.fTable.querySelectorAll('tr')[i];
                    appendCells(row, data, index);
                }

                // Populate Champion
                const championData = getCellData(championRow, 3, 5);
                appendCells(tables.championTable.querySelectorAll('tr')[0], championData, index);

                // Populate Golden Boot
                const goldenBootData = getCellData(goldenBootRow, 1, 5);
                appendCells(tables.goldenBootTable.querySelectorAll('tr')[0], goldenBootData, index);

                // Populate Top Player
                const topPlayerData = getCellData(topPlayerRow, 1, 5);
                appendCells(tables.topPlayerTable.querySelectorAll('tr')[0], topPlayerData, index);
            }

            function appendCells(row, data, index) {
                const teamCell = document.createElement('td');
                const teamName = abbreviations[data.team] || data.team;
                const flagImg = countries[data.team] ? `<img src="${countries[data.team]}" alt="${data.team}" style="width:20px; margin-right:5px;">` : '';
                teamCell.innerHTML = `${flagImg}${teamName}`;
                const scoreCell = document.createElement('td');
                scoreCell.textContent = data.score;

                row.appendChild(teamCell);
                row.appendChild(scoreCell);
            }
        });
    </script>
    <div class="footnote">
        &copy; 2024. Website created by Nima N.
    </div>
</body>

</html>